---
날짜: 2024-08-08
넘버: 
태그: 프로그래밍
저자: Eazy Bytes
출처: https://www.udemy.com/course/master-microservices-with-springboot-docker-kubernetes-korean/
aliases:
---
### 날짜:  2024-08-08 16:01

### 태그: #프로그래밍 #자바 #스프링

>[!메모]
>

### 원문
---
# Metric과 모니터링
## Metric 정보 파악하기
### Metric이 필요한 이유
- 이벤트 로그만으로는 특정 시나리오에서 발생한 일만 파악할 수 있다.
- 마이크로서비스를 제대로 모니터링하기 위해 각 서비스들의 Metric 정보를 파악할 수 있어야 한다.
	- 애플리케이션의 성능에 대한 수치 측정값.
	- CPU 사용량, 메모리 사용량, heap dump 사용량, 스레드, 연결, 오류 등
- Metric이 특정 임계값을 초과할 때 경고, 알림을 설정할 수 있다.
###  Metric 정보를 파악하기 위한 구성요소 & 툴
- Spring boot actuator
- Micrometer
- Prometheus
- Grafana
### Spring boot actuator
- `/actuator/metrics`
	- 애플리케이션의 Metric 정보를 제공해준다.
- 특정 마이크로서비스의 상태를 파악하기 위해 모든 인스턴스의 actuator의 URL으로 접근하는 것은 비효율적이다.
	- 인스턴스에서 모든 Metric을 추출하고 집계할 수 있어야 한다.
	- `Prometeus`가 이 역할을 수행한다.
### Micrometer
- [Micrometer 공식 사이트](https://micrometer.io/)
- `/actuator/metrics`의 정보를 모니터링 시스템이 이해할 수 있는 형식으로 제공한다.
- 개발자는 애플리케이션에 특정 마이크로미터 종속성을 추가하고 Metric format에 대한 설정을 명시하면 된다.
- `slf4j`와 매우 유사하다.
	- 로깅 프레임워크를 구현하는 fact 패턴이다.
	- 로그를 위한 `slf4j`, Metric을 위한 `Micrometer`
- 홈페이지의 캐치프레이즈: `vendor neutral application observability facade`
	- 벤더 중립적 애플리케이션 가시성 facade
	- facade: 표면
- fact design pattern
	- 백그라운드에서 많은 복잡성을 처리할 front 인터페이스를 배포하는 것
- observability 를 구현하기 위해 다른 여러 벤더에 기반하여 메트릭을 추출할 수 있다.
	- 그 중 하나가 `prometheus`다.
- Micrometer가 지원하는 vender
	- **AppOptics**, **Azure Monitor**, **Netflix Atlas**, **CloudWatch**, **Datadog**, **Dynatrace**, **Elastic**, **Ganglia**, **Graphite**, **Humio**, **Influx/Telegraf**, **JMX**, **KairosDB**, **New Relic**, **OpenTelemetry** Protocol (OTLP), **Prometheus**, **SignalFx**, **Google Stackdriver**, **StatsD**, and **Wavefront**.
- 마이크로미터가 메트릭 정보를 추출하면 각 마이크로서비스 컨테이너에서 메트릭 정보를 내보내고, 한 곳으로 통합한다.
### Prometheus
- [Prometheus 공식 홈페이지](https://prometheus.io/)
- Prometheus는 actuator가 제공하는 정보를 이해할 수 없다.
	- Prometheus는 메트릭 분석을 위해 micrometer를 사용한다.
- 각 컨테이너와 마이크로서비스로부터 모든 메트릭을 수집하는 오픈소스이다.
	- 모니터링에 도움을 주는 대시보드, 그래프도 만들 수 있다.
### Grafana
- Prometheus를 구성한 뒤에는 Grafana와 통합해야 한다.
	- Prometheus만으로는 복잡한 대시보드를 구축할 수 없고, 알림과 경고를 생성할 수 없다.

---
### 생각(파생된 질문/생각)

### 출처
- [유데미 - Java, Spring Boot, Spring Cloud, Docker, Kubernetes, Helm, 마이크로서비스 보안](https://www.udemy.com/course/master-microservices-with-springboot-docker-kubernetes-korean/)

### 연결 문서 (연결 이유)
