---
날짜: '"2023-11-08"'
넘버: 
태그: 프로그래밍/도커
출처: 그림과 실습으로 배우는 도커 & 쿠버네티스
aliases:
---
### 날짜  2023-11-08 18:02

### 태그: #프로그래밍/도커 

>[!메모]
>

### 원문
---
# 7.1 도커 컴포즈란?
- 시스템 구축과 관련된 ㅁ여령어를 하나의 텍스트파일에 기재해 명령어 한 번으로 시스템 전체를 실행하고 종료와 폐기까지 한 번에 하도록 도와주는 도구.
### 도커 컴포즈의 구조
- YAML(YAML Ain't a Markup Language)포맷으로 작성
- 시스템 구축에 필요한 설정을 정의한 파일을 이용하여 전체 시스템을 일괄 실행(run) 또는 일괄 종료 및 삭제(down)할 수 있는 도구이다.
- up 커맨드
	- docker run 커맨드와 유사.
	- 정의파일에 기재된 내용대로 이미지를 내려받고 컨테이너를 생성 및 실행한다.
- down 커맨드
	- 컨테이너와 네트워크를 정지 및 삭제한다.
	- 볼륨과 이미지는 삭제하지 않는다.
	- 컨테이너와 네트워크 삭제 없이 종료만 하고 싶다면 stop을 사용한다.
### 도커 컴포즈와 Dockerfile 의  차이점
- 도커 컴포즈
	- docker run 명령어를 모아놓은 것과 같다.
	- 컨테이너와 주변 환경을 생성한다.
	- 네트워크와 볼륨을 함께 만들 수 있다.
- Dockerfile
	- 이미지를 만들기 위한 스크립트
	- 네트워크나 볼륨을 만들 수 없다.
# 7.2 도커 컴포즈 설치와 사용법
## 도커 컴포즈 설치
- 윈도우, macOS는 이미 설치 되어있음
- 리눅스에서는 설치를 해야 한다.
```bash
sudo apt install -y python3 python3-pip
sudo pip3 install docker-compose
```
- docker compose 파일의 이름
	- docker-compose.yml
	- 파일은 호스트 컴퓨터에 배치되지만 명령어는 도커엔진에 전달된다.
	- 만들어진 컨테이너도 동일하게 도커 엔진 위에서 동작한다.
	- 사람이 일일이 입력하던 명령어를 도커 컴포즈가 대신 입력해주는 역할을 해준다.
- 정의 파일은 한 폴더에 하나만 있을 수 있다.
	- 여러 개의 정의 파일을 사용하려면 그 개수만큼 폴더를 만들어야 한다.
	- 컨테이너 생성에 필요한 이미지 파일이나 HTML 파일 역시 컴포즈가 사용할 폴더에 함꼐둔다.
## 7.3 도커 컴포즈 파일 작성법
```yml
version: "3"

services:
	apa000ex2:
		image: httpd
		port:
			- 8080:80
		restart: always
```
- `docker run --name apa000ex2 -d -p 8080:80 httpd`와 동일하게 작동.
- 워드프레스 컨테이너 컴포즈 파일 예제
```yml
version: "3"

services:
	wordpress000ex12:
		depends_on:
			- mysql000ex11
		image: wordpress
		networks:
			- wordpress000net1
		ports:
			- 8085:80
```



---
### 생각(파생된 질문/생각)

### 출처

### 연결 문서 (연결 이유)
