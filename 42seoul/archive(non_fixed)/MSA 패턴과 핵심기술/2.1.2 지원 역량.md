---
날짜: '"2024-02-10"'
넘버: 
태그: 프로그래밍
출처: "마이크로서비스 아키텍처: MSA"
강사: 코드프레소
aliases:
---
### 날짜  2024-02-10 16:22

### 태그: #프로그래밍 

>[!메모]
>

### 원문
---
# 지원 역량
- 기술 / 아키텍처 패턴을 이야기 한다.
	- Service Discovery
	- Config Server
	- API Gateway
	- SW Defined Load Balancer
	- Circuit Breaker
	- Distributed Tracing
	- Data Lake
	- Messaging
### Service Discovery
- 서비스 Registry
	- [[Eureka Server]]
- 서비스 개수 및 인스턴스 개수가 급증할 수 있다.
	- 전체 Topology(아키텍처)가 복잡해진다. 
	- 한 서비스에서 다른 서비스를 호출할 때 물리적 정보를 유지하는 것이 비효율적이다.
		- 서비스 A에서 B를 호출할 때 서비스 B가 스케일 인아웃을 할 때 정적인 정보 없이 동적으로 처리할 수 있어야 함.
- 중앙에서 시스템의 모든 서비스 정보를 유지
- 새로운 인스턴스가 생성되면 중앙 에이전트에게 정보를 등록한다.
- 서비스 간에는 다른 서비스의 물리적 주소를 유지하지 않는다.
- 유연하게 인스턴스 및 서비스를 추가 삭제 가능하다.
### Config Server
- 기존에는 설정 정보, 자체 설정 파일이나 OS 환경 변수로 관리했다.
	- MSA를 도입하면 설정 관리가 복잡해진다.
		- 20개 서비스, 5개 환경(개발, Staging, QA환경 등) == 100개의 설정 파일
	- 환경 마다 매번 새롭게 빌드/패키징을 해야하는 문제
	- 서비스의 100개라면 100개 모두 재배포해야 함.
	- 설정 파일이 잘못 관리되면 서비스 장애가 일어남
- Config Server 패턴
	- 설정 정보를 Application 파일에서 완전히 분리
	- 중앙 Config Server에서 설정 관리
	- 저장 백엔드는 git, DBMS 사용
	- 서비스는 Application이 기동될 때 중앙 서버에서 설정 정보를 fetch함
	- 설정 정보 변경시 서비스 재배포 없이 반영 가능하다.
### Service Gateway
- 다양한 서비스등에 대한 단일 진입점
	- 인증, 인가, 로깅, 필터링 등의 공통 처리 수행
	- 서비스 문제 발생 시 요청 차단 / 대안 경로로 변경 등
- 중앙 서버에서 처리한 후 서비스로 라우팅
### SW Defined Load Balancer
- 인프라 토폴로지가 매우 복잡하다.
	- 서비스 간 의존성이 복잡
	- 인스턴스들의 제거, 생성이 매우 빈번
- 전통적 로드벨런서 사용은 비효율적이다.
	- 물리적 주소를 등록하고 사용하기 때문에..
- 서비스를 호출하는 클라이언트에서 SW로 로드 밸런싱
	- 클라이언트 쪽 소프트웨어에서 구현되어있어야 한다.
		- service registry를 활용한다.
### Circuit Breaker
- 서비스 장애는 언제든 발생할 수 있다.
	- 하나의 서비스의 장애가 다른 서비스들에 전파되어 전체 시스템의 장애로 이어질 수 있다.
- 특정 서비스 장애는 해당 서비스만의 장애로 격리해야 한다.
- Circuit Breaker라는 컴포넌트가 삽입되어야 한다.
	- 통계(400, 500 에러)를 계속 분석하는 컴포넌트
	- 장애가 발생하면 해당 서비스로의 호출을 CB가 차단을 한다.
### Distributed Tracing
- 하나의 API 호출이 다양한 서비스에 분산되기 때문에 에러 추적이 어렵다.
	- 장애 발생 시 어떤 서비스에서 장애가 시작했는지 판단해야 한다.
- 서비스 간 모든 호출에 추적 ID를 삽입한다.
	- 헤더 같은 곳에 ID를 삽입
	- 추적 ID를 키로 하여 단일 API 트랜잭션의 활동을 파악한다.
	- [[zipkin]]
### Data Lake
- 데이터 파편화 가능성이 존재한다.
- 비정형 원시 데이터를 그대로 저장
	- 각각의 서비스가 발생시키는 원시 데이터를 그대로 저장하는 것.
	- RDBM 데이터, JSON 데이터, 센서 데이터, 로그 데이터 등
- Hadoop, HDFS 등의 대용량 비정형 데이터 저장, 처리 기술이 발달
- 데이터를 분석 시점에 데이터 가공을 고민
- 전통정 ETl이 아닌 실시간 Data ingestion 도구를 사용
	- Flume, [[Kafka]] 등
### Messaging
- 메시징(Event)를 이용한 서비스간 협력 설계 방식을 추천한다.
	- 비동기적 방식
- 이벤트 주도 설계가 서비스 간 결합도를 낮출 수 있다.
	- [[이벤트 주도 설계]]
- RabbitMQ, ActiveMQ, [[Kafka]]
---
### 생각(파생된 질문/생각)

### 출처
- https://www.udemy.com/course/codepressomsa/

### 연결 문서 (연결 이유)
