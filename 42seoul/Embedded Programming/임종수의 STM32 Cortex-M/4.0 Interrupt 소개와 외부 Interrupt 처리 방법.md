---
날짜: "2025-02-06"
넘버: 
태그: 프로그래밍/임베디드
출처: https://product.kyobobook.co.kr/detail/S000001988213
aliases:
---
### 날짜:  2025-02-06 01:21

### 태그: #프로그래밍/임베디드 

>[!메모]
>

### 원문
---
# 4.0 Interrupt 소개와 외부 Interrupt 처리 방법
대부분의 프로세서들은 외부 소자와 연결하기 위한 많은 주변 장치들을 가지고 있다.
- 인터럽트
	- 주변장치들은 Core의 정상적인 작업보다 우선순위가 높은 업무 발생시킬 수 있다. 이를 인터럽트라 한다.
- 인터럽트 간의 우선순위
	- 발생한 인터럽트는 기본적으로 미리 정해져 있다.
- 인터럽트 발생 시 프로세서의 동작
	- **Interrupt Controller**는 core의 정상적인 명령어 해석 작업을 잠시 멈추고 인터럽트에 대한 처리를 하도록 요청한다.
	- Cortex-M의 경우 [[NVIC]](Nested Vectored Inerrupt Controller)을 사용한다.
		- 모두 NVIC을 사용하기 때문에 Code에 대한 이식성을 높일 수 있다.
- [[ISR]]
	- 인터럽트 발생 시 인터럽트에 따라 호출할 핸들러 함수를 미리 작성해야 한다.
- Interrupt vector table
	- 미리 발생할 각 인터럽트의 핸들러를 저장해놓은 것
	- 각 인터럽트의 ISR의 시작 위치를 저장해놓은 것.
- ISR 수행 후 과정
	- interrupt가 호출 되기 전 수행하던 작업의 다음 명령어를 실행할 수 있도록 Program Counter([[PC]])가 바뀐다.
- CubeMX를 사용하면 기본적으로 핸들러 함수를 작성해준다.
	- ISR code routine
```
1. 인터럽트 발생
2. 인터럽트 컨트롤러(Cortex-M의 경우 NVIC)가 우선순위에 근거하여 최종적으로 선택한 ISR을 코어가 호출하게 한다.
```

> [!warning]
> ISR에서 실행할 함수는 오래 머물지 않도록 해야 한다.
> ISR 분기에서 너무 오래 머물면 main() 함수의 정상 수행에 문제를 발생시킬 수 있다.
> main() 함수의 loop는 각각의 수행 시간이 수십us 안에 완료되어야 한다.
- Interrupt와 Event
	- 엄밀하게 따지자면 정확히 맞는 구분은 아닐 수 있다.
	- 내부에서 설정한 조건에 의해 발생하면 이벤트
		- 이벤트가 발생하여 플래그 값을 감지하고 호출되는 함수 -> callback 함수
	- 외부에서 발생하면 인터럽트
		- ISR 분기에서 할 일이 너무 많다면, event를 발생시켜 callback 함수를 실행시킬 수 있다.
			- ISR의 호출이기 때문에 같은 우선 순위와 같은 동작 모드를 가진다.
		- 



---
### 생각(파생된 질문/생각)

### 출처
- https://product.kyobobook.co.kr/detail/S000001988213

### 연결 문서 (연결 이유)
