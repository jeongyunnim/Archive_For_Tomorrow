---
날짜: "2025-02-11"
넘버: 
태그: 프로그래밍/임베디드
출처: https://product.kyobobook.co.kr/detail/S000001988213
aliases:
---
### 날짜:  2025-02-11 16:30

### 태그: #프로그래밍/임베디드 

>[!메모]
>

### 원문
---
# 6.0 Timer와 WatchDog Timer
- 운영체제를 사용하는 것
	- multi-tasking: 아주 작은 시간 단위로 쪼개서 순서대로 처리하여 동시에 처리하는 것처럼 보이기 위함
- SysTick
	- system timer
	- OS를 사용하는 경우에 **일정하고 짧은 시간 간격**을 생성하기 위한 타이머
	- Cortex-M core에 내장되어있는 기본 timer
- UART 통신의 경우 PC로 일정한 시간 간격을 두고 MCU의 데이터를 전송하도록 구성해야 한다.
- **일정한 시간 간격을 생성해주는 timer의 활용**
	- 0.5초 간격으로 MCU 데이터를 전송하여 PC에서 모니터링 할 수 있도록 하는 경우
	- 일정한 시간 동안 MCU 내부의 while loop가 looping을 하지 않는 경우

```
학습 목표
- STM32 MCU에서 제공하는 Timer 종류와 각각의 특징을 학습한다.
- Timer의 내부 구조와 동작 원리를 학습한다.
- Timer 동작 원리와 관련된 register 들을 설정하는 법을 학습한다.
- 다양한 Timer 동작 방식들을 그림과 함께 학습한다.
```


## 6.1 Timer 동작 원리 상세 분석
![[Pasted image 20250211194918.png]]
### Basic Timer: TIM6과 TIM7
- 동작 중에 조정 가능한 prescaler에 의해서 구동되는 16bits auto-reload counter로 구성된다.
- 입력과 출력 핀을 갖지 않는다.
- 용도
	- 일반적인 시간 간격 설정
	- 다른 timer의 master로 사용
	- DAC를 위한 time 구간 설정
- 내부적으로 DAC에 연결되어있고, trigger 출력을 통해 구동할 수 있다.
	- (14 챕터)
### GP(General Purpose) timer: TIM2 ~ TIM5, TIMy
- 동작 중에 조정 가능한 prescaler에 의해 구동되는 16bits auto-reload counter로 구성된다.
- 용도 
	- basic timer 기능들을 모두 수행
	- 최대 4개의 [[PWM]] 채널 구성 가능
	- GP timer와 Advanced control timer 는 함께 동기화될 수 있다.
	- 외부 신호로 timer를 동기화할 수 있다.
	- 여러 timer들을 함께 상호 연결하여 동기화할 수도 있다.
	- 인터럽트 생성
		- **Update** Interrupt
			- Counter Overflow/Underflow발생
			- countter 초기화
		- **Trigger** Interrupt
			- Counter start, Stop, 초기화
			- 내/외부 trigger에 의한 count
		- 입력 capture와 출력 비교
### Advnaced control timer: TIM1과 TIM8, TIMx
- 동작 중에 조정 가능한 prescaler에 의해 구동되는 16bits auto-reload counter로 구성된다.
- 용도
	- 모든 GP timer 기능 수행
	- timer 출력 신호를 reset 상태 또는 알려진 상태로 설정하는 break 입력 기능
	- 추가적으로 **3상 교류 전동기 제어**와 **전력 변환**에 관계된 기능들을 제공

- 하나의 master와 5개의 slave timer들로 고정밀의 시간 간격을 생성할 수 있는 High Resolution timer와 low power timer가 있다.
![[Pasted image 20250212085656.png]]
- 내부 구성도
![[Pasted image 20250212085959.png]]
- timer 동작을 위한 내부 구성도
![[Pasted image 20250212090215.png]]
- advanced control timer TIM1, TIM8은 core clock과 동일한 최대 72MHz인 [[APB]]2에 연결되어있다.
- [[prescaler]]
	- clock을 조정해주는 block
- APB2 timer clock은 64MHz이고 이 클럭은 3번과 같이 TIM1과 TIM8, 즉 **CK_INT** internal clock으로 사용된다.



---
### 생각(파생된 질문/생각)

### 출처
- https://product.kyobobook.co.kr/detail/S000001988213

### 연결 문서 (연결 이유)
