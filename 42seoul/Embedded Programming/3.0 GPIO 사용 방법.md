---
날짜: "2025-02-03"
넘버: 
태그: 프로그래밍/임베디드
출처: https://product.kyobobook.co.kr/detail/S000001988213
aliases:
---
### 날짜:  2025-02-03 14:43

### 태그: #프로그래밍/임베디드 

>[!메모]
>

### 원문
---
# 3.0 [[GPIO]] 사용 방법
- 학습 목표
	- GPIO port가 무엇인가
		- 내부 구조와 전기적인 특성을 분석
	- GPIO port를 제어하는 코드 작성법
	- STM32 MCU에서 GPIO port가 어떻게 구성되어 있는지
	- CubeMX를 활용한 GPIO C framework source file 자동 생성 방법
	- C source file에 필요한 기능들을 추가하는 방법
	- MCU 이미지 갱신에 따른 RESET 상황 또는 임의의 RESET 상황에서 Latch 소자가 갖는 `SN54/74HCT573 소자`와 함께 학습한다.
![[Pasted image 20250203144709.png]]
- ST 마이크로에서 판매하는 모든 Nucleo보드는 144 pin 보드와 64pin 보드로 구분된다.

## 3.1 GPIO 내부 구조와 전기적 특성 분석
- port bit의 내부 구조
![[Pasted image 20250203150129.png]]
- port bit가 외부와 신호를 주고받는 방식
	- 외부에서 신호가 들어오는 경우
		- 3번에서 Input driver block을 거친다.
	- 임의의 신호가 MCU에서 출력되는 경우
		- 6번에서 Output driver block을 거친다.
- default입출력 결정
	- 4번에서 default 입력을 결정하기 위해 [[pull-up pull-down 저항]]을 선택할 수 있다.
	- 7번에서 default 출력을 결정하기 위해 [[push-pull과 open-drain]]을 선택할 수 있다.
- [[reset 구간]] 또는 특별한 설정하지 않은 pin은 [[floating 상태]]를 가진다.
	- [ ] reset 구간이 무엇인가
	- 설정이 되어있을 때만 의미가 있는 값을 읽을 수 있는 것인가?
### MCU에 주어지는 신호
- 입력 신호
	- analog 입력 신호
	- digital 입력 신호
		- [[I2C]], [[SPI]] 같은 규격화된 입력 신호
			- [[alternate function]]이라고도 한다.
		- GPIO 일반 bit 신호
			- 1번과 같이 **input data register**에 저장된다.
- 출력 신호
	- 5번: GPIO Output data register를 [[GPIO bit]] 출력 신호로 선택하거나 또는 Alternate function 신호를 출력 신호로 선택하여 출력할수 있다. 
### 2개의 `I/O data register`와 `Bit set/reset register`
- 2개의 `I/O data register`
	- GPIOx_**IDR**(Input Data Register)
	- GPIOx_**ODR**(Ouput Data Register)
![[Pasted image 20250203164307.png]]
- Bit **set/reset** register
	- GPIO 핀의 상태를 개별적으로 제어하기 위한 32비트 레지스터.
	- GPIOx_BSRR, GPIOx_ODR에 대한 bitwise access
- 기본 출력 신호 레벨
	- push-pull
	- high와 low로 설정할 수 있다.
	- [[PWM]]처럼 출력 신호 level이 빈번하게 바뀌는 경우
		- 8번과 같이 Maximum output speed를 사용하려는 port pin의 driving 주파수에 맞게 설정해주어야 한다.
![[Pasted image 20250203170829.png]]
- 출력 신호 레벨 별 특이사항
	- Very High로 갈 수록 GPIO 출력 전압 레벨은 빠른 transition을 가질 수 있다.
	- [[EMI noise]]와 전력 소비 증가
		- 고주파가 증가했다는 의미
		- [ ] 고주파 증가와 전력 소비 간의 관계
- reset 구간 동안 또는 reset 이후 [[JTAG]] 핀을 제외한 나머지 핀들은 floating 상태이다.
	- 외부 interrupt 입력을 받지 않는다.
- absolute maximum(MAX) rating 이상의 stress를 주면 device에 손상이 가서 오작동할 수 있다.
	- FT_xxx pins의 입력 전압 범위 $V_{ss} - 0.3$ ~ $V_{DD} + 4$ 
	- $V_{DD}$가 3.3V인 경우 최대 입력 전압은 7.3V가 된다.
	- STM32F MCU를 0~5V로 동작하는 소자와 바로 연결하기 위해서는 입력 핀은 FT_xx를 선택해야 한다.
	- [ ] 전체적으로 뭐라는지 모르겠음.


---
### 생각(파생된 질문/생각)

### 출처
- https://product.kyobobook.co.kr/detail/S000001988213

### 연결 문서 (연결 이유)
